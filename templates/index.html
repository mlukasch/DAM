<!DOCTYPE html>
<html lang="en">
<head>
  <title>DAM</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis.min.css">
  <link rel="stylesheet" href={{ url_for('static', filename='main.css') }}>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
  <script type="text/javascript" src="http://mpld3.github.io/js/mpld3.v0.1.js"></script>
   
  <script src={{ url_for('static', filename='main.js') }}></script> 
  <script type="text/javascript">
    var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>
   
</head>
<body>

<div class="container">
  <div>
  <h1 class="side"><label class="dataset_width"><span class="label label-primary full-width" id="cdata">Choose dataset</span></label></h1>
  <h1 class="side"><label class="dataset_width"><span class="label label-primary full-width" id="cdim">Dimensions</span></label></h1>
  <h1 class="side"><label class="dataset_width"><span class="label label-primary full-width" id="ccode">Code-list</span></label></h1> 
  <h1 class="side"><label class="dataset_width"><span class="label label-primary full-width" id="cremark">Remark</span></label></h1>
  </div>
  <div> 
    <select class="form-control dataset_width side" id="data_select"  value="None">
      <option value="None" ></option>
      <option value="Aragon">Aragon</option>
      <option value="Bonn">Bonn</option>
      <option value="ESIF_Sample">ESIF Sample</option>
      <option value="ESIF">ESIF</option>
      <option value="Thessaloniki">Thessaloniki</option>
    </select>
    <script>
      $('#data_select').on('change', function () {
      var selectVal = $("#data_select option:selected").val();
      document.getElementById("cdata").innerHTML = selectVal;
      $.ajax({
			 type: "GET",
			 url: $SCRIPT_ROOT + "/observe_dim",
			 contentType: "text/json; charset=utf-8",
			 data: {city: $('#cdata').text() },
			 success: function(data) { 
				 console.log(data.result);
				 jsonData = data.result;
				 if (data.result){
					 var dimContainer = document.getElementById('observe_dimension');
					 remove_options(dimContainer);
					 add_options_to_selection(dimContainer, jsonData);
					 console.log(jsonData);
					  
					 var div = document.getElementById("checkboxOfTask1");	
					 create_dim_checkboxes("checkboxOfTask1");
					 }
			 },
				 
			 error: function(jqXHR, textStatus, errorThrown) {
		            alert(errorThrown);
			 }
      });     
      })
    </script>
    <!--  ****************************** -->
    <select class="form-control dataset_width side" id="observe_dimension"> 
  	</select>
  	<script>
      $('#observe_dimension').on('change', function () {
      var selectVal = $("#observe_dimension option:selected").val();
      if (selectVal){
	      $.ajax({
				 type: "GET",
				 url: $SCRIPT_ROOT + "/code_list",
				 contentType: "text/json; charset=utf-8",
			 	 data: {dim: selectVal },
			 	 success: function(data) { 
					 console.log(data.result);
				 	 jsonData = data.result;
				 	 if (data.result){
						 var dimContainer = document.getElementById('code_list');
						 remove_options(dimContainer);
					 	 add_options_to_selection(dimContainer, jsonData);
					 	 console.log(jsonData);
					 	}
			 	},
				 
				 error: function(jqXHR, textStatus, errorThrown) {
		        	    alert(errorThrown);
			 	}
      	});
      }
      })
    </script>
  	<select class="form-control dataset_width side" id="code_list"> 
  	</select>
  	<select class="form-control dataset_width side" id="code_remark"> 
  	</select>	
    
    <p><p>
    <!-- Trigger the modal with a button -->
    <button type="button" class="btn btn-info btn-lg dataset_width" data-toggle="modal" data-target="#damModal">Data Analysis & Mining</button>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="damModal" role="dialog">
    <div class="modal-dialog">
      
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Which computational service do you need?</h4>
        </div>
        <div class="modal-body">
	  <div>
	   <button type="button" class="btn btn-info btn-lg custom " data-toggle="modal" data-target="#task1Modal"> Outlier Detection</button> 
	   <button type="button" class="btn btn-info btn-lg custom " data-toggle="modal" data-target="#task2Modal">  Pattern Mining  </button>
	   <button type="button" class="btn btn-info btn-lg custom " data-toggle="modal" data-target="#task3Modal">  Trend Analysis  </button>
	  </div>
	  <p>
	  <div>
	   <button type="button" class="btn btn-info btn-lg custom" data-toggle="modal" data-target="#task4Modal">  Graph Analysis  </button>
	   <button type="button" class="btn btn-info btn-lg custom" data-toggle="modal" data-target="#task5Modal">    Aggregation   </button>
	   <button type="button" class="btn btn-info btn-lg custom" data-toggle="modal" data-target="#task6Modal">    Statistics    </button>
	  </div>
	  <p>
	  <div>
	   <button type="button" class="btn btn-info btn-lg custom" data-toggle="modal" data-target="#task7Modal">   Pattern Matching </button>
	   <button type="button" class="btn btn-info btn-lg custom" data-toggle="modal" data-target="#task8Modal">    Comparison      </button>
	   <button type="button" class="btn btn-info btn-lg custom" data-toggle="modal" data-target="#task9Modal">    Clustering      </button>
	  </div> 

	   
	</div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default"  name="closeBtn" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>


  <!-- output area -->
  <strong><div id="echoResult"></div></strong>
  
  <div id="visualization"></div>
 
   <!-- 
   <div id="f31056422"></div>
   <script type="text/javascript">
    mpld3.draw_figure("f31056422", {"width": 640.0, "axes": [{"xlim": [0.0, 1.0], "yscale": "linear", "axesbg": "#EAEAF2", "texts": [], "zoomable": true, "images": [], "xdomain": [0.0, 1.0], "ylim": [0.10000000000000001, 1.0], "paths": [{"edgecolor": "#FFFFFF", "facecolor": "#EAEAF2", "edgewidth": 0.3, "pathcodes": ["M", "L", "L", "L", "Z"], "yindex": 1, "coordinates": "axes", "dasharray": "10,0", "zorder": 1000001.0, "alpha": 1, "xindex": 0, "data": "data02", "id": "363454617730896"}], "sharey": [], "sharex": [], "axesbgalpha": null, "axes": [{"grid": {"color": "#FFFFFF", "alpha": 1.0, "dasharray": "10,0", "gridOn": true}, "position": "bottom", "nticks": 6, "tickvalues": null, "tickformat": null}, {"grid": {"color": "#FFFFFF", "alpha": 1.0, "dasharray": "10,0", "gridOn": true}, "position": "left", "nticks": 10, "tickvalues": null, "tickformat": null}], "lines": [{"color": "#4C72B0", "yindex": 1, "coordinates": "data", "dasharray": "10,0", "zorder": 2, "alpha": 1, "xindex": 0, "linewidth": 1.4, "data": "data01", "id": "363454617729168"}], "markers": [], "id": "363454616431568", "ydomain": [0.10000000000000001, 1.0], "collections": [], "xscale": "linear", "bbox": [0.125, 0.099999999999999978, 0.77500000000000002, 0.80000000000000004]}], "data": {"data02": [[0.8975694444444445, 0.9305555555555556], [0.9887992831541218, 0.9305555555555556], [0.9887992831541218, 0.9842171717171717], [0.8975694444444445, 0.9842171717171717]], "data01": [[0.7884709865986378, 0.8710796390880277], [0.6256711247135093, 0.2566109715010527], [0.3359447878854377, 0.8765248121061339], [0.6728601761695596, 0.5975763820467942], [0.18684948786574185, 0.6041075199829672], [0.19491972941282099, 0.9398912219119647], [0.9267704471973628, 0.12385185006121469], [0.6768653956251186, 0.22580041359511138], [0.40356197033368935, 0.12709640992649407], [0.017945334425159887, 0.912858451972148]]}, "id": "363454571411408", "toolbar": ["reset", "move"], "height": 440.0});
	</script>
	 -->
  
  <!-- Task1 Modal content -->
  <div class="modal fade" id="task1Modal" role="dialog">
    <div class="modal-dialog">
	   <div class="modal-content">
             <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h4 class="modal-title">  <div id="od_task"> Outlier Detection </div></h4>
             </div>
             
             <div class="modal-body">
	       {% block content1 %}
	       <script type="text/javascript">
			 $(function() { 
			  $("#submitBtn1").click(function() { 
			 		$("#damModal").modal("hide");
		 	 		$("#task1Modal").modal("hide"); 
		 	 		var selectedDimLst = get_selected_dims();
		 	 		//var userData = {'city': $('#cdata').text(), 'dim':selectedDimLst};   
		 	 	  $.ajax({
					 type: "GET",
					 url: $SCRIPT_ROOT + "/outlier_detection",
					 contentType: "text/json; charset=utf-8",
					 data: {city: $('#cdata').text() }, 
					 success: function(data) { 
						 var div = document.getElementById('visualization');
						 while(div.firstChild){
						     div.removeChild(div.firstChild);
						 }
						 jsonData = JSON.parse(data)
					 	 
						 },
						 
					 error: function(jqXHR, textStatus, errorThrown) {
	     		            alert(errorThrown);
							 }
					}); //ajax     
					});
				 });//click #submitBtn1 
				 
	       </script>
	        <strong>Choose dimensions:</strong> 
	        <div id="checkboxOfTask1"></div>  
             	
 	       
	      <br><br>
	       </div>
	       {% endblock %} 
             <div class="modal-footer">
	        	<button type="button" class="btn btn-info btn-lg custom" id="submitBtn1" name="submitBtn1">Submit</button>
				<button type="button" class="btn  btn-info btn-lg custom" data-dismiss="modal">Close</button>
            </div>
	   </div>
    </div>
  </div>

  
  <!-- Task2 Modal content -->
  <div class="modal fade" id="task2Modal" role="dialog">
    <div class="modal-dialog">
	   <div class="modal-content">
             <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h4 class="modal-title">Pattern Mining</h4>
             </div>
             <div class="modal-body">
              {% block content %}
	       <script type="text/javascript">
			 $(function() {

			 $("#submitBtn2").click(function() {
			 	$("#damModal").modal("hide");
		 	 	$("#task1Modal").modal("hide");
		 
			 	$.ajax({
			 		type: "GET",
		 			url: $SCRIPT_ROOT + "/echo/",
		 			contentType: "application/xml; charset=utf-8",
		 			data: { echoValue: $('#cdata').text() },
		 			success: function(data) {
                		 $('#echoResult').text(data.value);
		 				var container = document.getElementById('visualization');
		 				var items = [
		 					{x: '2014-06-11', y: 10},
		 					{x: '2014-06-12', y: 25},
		 					{x: '2014-06-13', y: 30},
		 					{x: '2014-06-14', y: 10},
		 					{x: '2014-06-15', y: 15},
		 					{x: '2014-06-16', y: 30}
		 					];
		 
			 			var dataset = new vis.DataSet(items);
			 			var options = {
					 		start: '2014-06-10',
		 					end: '2014-06-18'
		 					};
		 				var graph2d = new vis.Graph2d(container, dataset, options);
		 
			 		},
		 			error: function(jqXHR, textStatus, errorThrown) {
          	    	   alert(errorThrown);
			 		}
		 		}); //$.ajax     
			 });
		 		});//click #submitBtn2 
	       </script>
	       <strong>Enter a value to echo back:</strong>
	       <input size="10" id="echoText" name="echoText" type="text">
	      <br><br>
	       
	       {% endblock %}
          </div>
          <div class="modal-footer">
	        <button type="button" class="btn btn-info btn-lg custom" id="submitBtn2" name="submitBtn2">Submit</button>
			<button type="button" class="btn  btn-info btn-lg custom" data-dismiss="modal">Close</button>
          </div> 
	   </div>
    </div>
  </div>

  
  <!-- Task3 Modal content -->
  <div class="modal fade" id="task3Modal" role="dialog">
    <div class="modal-dialog">
	   <div class="modal-content">
             <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h4 class="modal-title">Trend Analysis </h4>
             </div>
             <div class="modal-body">
               <p>parameter for task 3 </p>
             </div>
             <div class="modal-footer">
               <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
             </div>
	   </div>
    </div>
  </div>

   <!-- Task4 Modal content -->
  <div class="modal fade" id="task4Modal" role="dialog">
    <div class="modal-dialog">
	   <div class="modal-content">
             <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h4 class="modal-title">Graph Analysis </h4>
             </div>
             <div class="modal-body">
	     

             </div>
             <div class="modal-footer">
               <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
             </div>
	   </div>
    </div>
  </div>

  

  <!-- Task5 Modal content -->
  <div class="modal fade" id="task5Modal" role="dialog">
    <div class="modal-dialog">
	   <div class="modal-content">
             <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h4 class="modal-title">Aggregation </h4>
             </div>
             <div class="modal-body">
               <p>parameter for task 5 </p>
             </div>
             <div class="modal-footer">
               <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
             </div>
	   </div>
    </div>
  </div>

  
  <!-- Task6 Modal content -->
  <div class="modal fade" id="task6Modal" role="dialog">
    <div class="modal-dialog">
	   <div class="modal-content">
             <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h4 class="modal-title"> Statistics</h4>
             </div>
             <div class="modal-body">
                 {% block content6 %}
	       <script type="text/javascript">
		 $(function() {

		 $("#submitBtn6").click(function() {
			 $("#damModal").modal("hide");
			 $("#task6Modal").modal("hide");
		 
			 $.ajax({
				 type: "GET",
				 url: $SCRIPT_ROOT + "/statistics",
				 contentType: "text/json; charset=utf-8",
				 data: {city: $('#cdata').text() },
				 success: function(data) { 
					 //show_statistics_graph('visualization', data);
					 var div = document.getElementById('visualization');
					 while(div.firstChild){
					     div.removeChild(div.firstChild);
					 }
					 jsonData = JSON.parse(data)
					 mpld3.draw_figure("visualization", jsonData['fig']) ;
					 
					 },
					 
				 error: function(jqXHR, textStatus, errorThrown) {
     		            alert(errorThrown);
						 }
					 });     
				 });
			 });
	       </script>
	       <strong>Introduction to Statistics</strong>
	       <p mean, std, >
	       <!-- <input size="10" id="echoText" name="echoText" type="text">
	         -->
	      <br><br>
	       
	       {% endblock %}
             </div>
             <div class="modal-footer">
	        <button type="button" class="btn btn-info btn-lg custom" id="submitBtn6" name="submitBtn6">Execute</button>
			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
             </div>
	   </div>
    </div>
  </div>

  
  <!-- Task7 Modal content -->
  <div class="modal fade" id="task7Modal" role="dialog">
    <div class="modal-dialog">
	   <div class="modal-content">
             <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h4 class="modal-title">Pattern Matching</h4>
             </div>
             <div class="modal-body">
               <p>parameter for task 7 </p>
             </div>
             <div class="modal-footer">
               <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
             </div>
	   </div>
    </div>
  </div>

   <!-- Task8 Modal content -->
  <div class="modal fade" id="task8Modal" role="dialog">
    <div class="modal-dialog">
	   <div class="modal-content">
             <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h4 class="modal-title">Comparison</h4>
             </div>
             <div class="modal-body">
               <p>parameter for task 8 </p>
             </div>
             <div class="modal-footer">
               <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
             </div>
	   </div>
    </div>
  </div>

  
   <!-- Task9 Modal content -->
  <div class="modal fade" id="task9Modal" role="dialog">
    <div class="modal-dialog">
	   <div class="modal-content">
             <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h4 class="modal-title">Clustering </h4>
             </div>
             <div class="modal-body">
             
             </div>
             <div class="modal-footer">
	       <button type="button" class="btn btn-info btn-lg custom" id="submitBtn9" name="submitBtn9">Submit</button>
               <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
             </div>
	   </div>
    </div>
  </div>
  
  
</body>
</html>

